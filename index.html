<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lamoon Barber Note</title>
    <style>
        :root {
            --bg: #121212;
            --card: #1e1e1e;
            --accent: #d4ff00; /* ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏°‡∏∞‡∏ô‡∏≤‡∏ß Lamoon */
            --text: #ffffff;
            --text-dim: #a0a0a0;
            --border: #333;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text); margin: 0; padding: 15px; }

        /* Header ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ó‡πà‡πÜ */
        .header-profile { 
            position: relative;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1503951914875-452162b0f3f1?q=80&w=1000&auto=format&fit=crop'); /* ‡∏£‡∏π‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏î‡∏ú‡∏° */
            background-size: cover;
            background-position: center;
            padding: 30px 20px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        /* ‡∏£‡∏π‡∏õ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏ä‡πà‡∏≤‡∏á */
        .profile-img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid var(--accent);
            background: #444;
            object-fit: cover;
        }

        .shop-info input { background: transparent; border: none; color: var(--accent); font-size: 1.4rem; font-weight: bold; width: 100%; outline: none; }
        .shop-info small { color: #eee; font-size: 0.9rem; }

        .settings-icon { position: absolute; top: 15px; right: 15px; font-size: 1.3rem; color: #fff; opacity: 0.7; }

        /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å */
        .card { background: var(--card); padding: 20px; border-radius: 20px; border: 1px solid var(--border); box-shadow: 0 10px 20px rgba(0,0,0,0.3); margin-bottom: 20px; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
        
        input, select { 
            width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #333; 
            background: #2a2a2a; color: white; font-size: 16px; outline: none; 
        }

        .btn-main { 
            width: 100%; padding: 16px; border-radius: 12px; border: none; 
            background: var(--accent); color: black; font-weight: bold; font-size: 1.1rem; 
            margin-top: 10px; transition: transform 0.1s;
        }
        .btn-main:active { transform: scale(0.98); }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î 3 ‡∏ä‡πà‡∏≠‡∏á */
        .king-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin: 20px 0; }
        .king-box { background: #262626; padding: 12px; border-radius: 15px; text-align: center; border: 1px solid #333; }
        .king-box small { display: block; font-size: 0.7rem; color: var(--text-dim); margin-bottom: 5px; text-transform: uppercase; }
        .king-box b { font-size: 1.1rem; color: var(--accent); }

        /* ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ */
        .history-card { background: #1a1a1a; border-radius: 15px; padding: 15px; margin-bottom: 15px; border-left: 5px solid var(--accent); }
        .status-btn { 
            display: inline-block; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; 
            margin-top: 10px; cursor: pointer; border: 1px solid;
        }
        .st-none { color: #ffcc00; border-color: #ffcc00; }
        .st-done { color: #00ff88; border-color: #00ff88; }
    </style>
</head>
<body>

    <div class="header-profile">
        <div class="settings-icon" onclick="openSettings()">‚öôÔ∏è</div>
        <img src="https://cdn-icons-png.flaticon.com/512/147/147144.png" class="profile-img">
        <div class="shop-info">
            <input type="text" id="shopName" onchange="saveCfg()" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô">
            <br>
            <small>‡∏ä‡πà‡∏≤‡∏á: <input type="text" id="barberName" style="width: 80px; color: #fff; font-size: 0.9rem;" onchange="saveCfg()"></small>
        </div>
    </div>

    <div class="card">
        <div class="row">
            <input type="date" id="date">
            <select id="pay">
                <option value="‡πÇ‡∏≠‡∏ô">üì± ‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô</option>
                <option value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î">üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</option>
            </select>
        </div>
        <div class="row">
            <select id="svc">
                <option value="‡∏ï‡∏±‡∏î‡∏ú‡∏°">‡∏ï‡∏±‡∏î‡∏ú‡∏°</option>
                <option value="‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î">‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î</option>
                <option value="‡∏™‡∏£‡∏∞‡πÑ‡∏î‡∏£‡πå">‡∏™‡∏£‡∏∞‡πÑ‡∏î‡∏£‡πå</option>
            </select>
            <input type="number" id="amt" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" inputmode="numeric">
        </div>
        <button class="btn-main" onclick="add()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    </div>

    <div id="display"></div>

    <script>
        let data = JSON.parse(localStorage.getItem('barber_data') || '[]');
        let cfg = JSON.parse(localStorage.getItem('barber_cfg') || '{"shop":"Lamoon Barber","barber":"‡∏ä‡πà‡∏≤‡∏á...","min":400,"rate":50}');

        document.getElementById('date').valueAsDate = new Date();
        document.getElementById('shopName').value = cfg.shop;
        document.getElementById('barberName').value = cfg.barber;

        function saveCfg() {
            cfg.shop = document.getElementById('shopName').value;
            cfg.barber = document.getElementById('barberName').value;
            localStorage.setItem('barber_cfg', JSON.stringify(cfg));
            render();
        }

        function openSettings() {
            let m = prompt("‡∏¢‡∏≠‡∏î‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏™‡πà‡∏á‡∏£‡πâ‡∏≤‡∏ô:", cfg.min);
            let r = prompt("% ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏ä‡πà‡∏≤‡∏á (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥):", cfg.rate);
            if(m) cfg.min = parseInt(m);
            if(r) cfg.rate = parseInt(r);
            saveCfg();
        }

        function add() {
            let amt = parseFloat(document.getElementById('amt').value);
            if(!amt) return;
            data.push({ id: Date.now(), date: document.getElementById('date').value, svc: document.getElementById('svc').value, amt: amt, pay: document.getElementById('pay').value, done: false });
            localStorage.setItem('barber_data', JSON.stringify(data));
            document.getElementById('amt').value = '';
            render();
        }

        function toggle(date) {
            let s = !data.find(d => d.date === date).done;
            data.forEach(d => { if(d.date === date) d.done = s; });
            localStorage.setItem('barber_data', JSON.stringify(data));
            render();
        }

        function del(id) { if(confirm('‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?')) { data = data.filter(d => d.id !== id); localStorage.setItem('barber_data', JSON.stringify(data)); render(); } }

        function render() {
            let div = document.getElementById('display'); div.innerHTML = '';
            let groups = data.reduce((a, b) => { a[b.date] = a[b.date] || []; a[b.date].push(b); return a; }, {});

            Object.keys(groups).sort().reverse().forEach(date => {
                let items = groups[date];
                let total = items.reduce((s, i) => s + i.amt, 0);
                let transfer = items.filter(i => i.pay === '‡πÇ‡∏≠‡∏ô').reduce((s, i) => s + i.amt, 0);
                let done = items[0].done;
                
                let shop = total <= cfg.min ? total/2 : (cfg.min/2) + ((total-cfg.min) * ((100-cfg.rate)/100));
                let barber = total - shop;

                div.innerHTML += `
                    <div class="history-card">
                        <div style="display:flex; justify-content:space-between; align-items:flex-end; margin-bottom:10px;">
                            <span style="font-size:0.9rem; color:var(--text-dim)">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${date}</span>
                            <span style="font-size:1.4rem; color:var(--accent); font-weight:bold;">‡∏ø${total}</span>
                        </div>
                        <div class="king-grid">
                            <div class="king-box"><small>‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô</small><b>${transfer}</b></div>
                            <div class="king-box"><small>‡∏ä‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ</small><b>${barber.toFixed(0)}</b></div>
                            <div class="king-box"><small>‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ</small><b>${shop.toFixed(0)}</b></div>
                        </div>
                        <div style="border-top: 1px solid #333; padding-top:10px;">
                            ${items.map(i => `<div style="display:flex; justify-content:space-between; font-size:0.85rem; margin-bottom:5px;">
                                <span>‚Ä¢ ${i.svc} (${i.pay})</span>
                                <span>‡∏ø${i.amt} <span onclick="del(${i.id})" style="color:red; margin-left:10px;">‚úï</span></span>
                            </div>`).join('')}
                        </div>
                        <div class="status-btn ${done ? 'st-done' : 'st-none'}" onclick="toggle('${date}')">
                            ${done ? '‚úì ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß' : '‚ö† ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'}
                        </div>
                    </div>
                `;
            });
        }
        render();
    </script>
</body>
</html>
